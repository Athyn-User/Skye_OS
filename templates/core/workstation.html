{% extends "core/base_simple.html" %}

{% block title %}Workstation - Skye OS{% endblock %}

{% block sidebar %}
<h3>Workstation Hub</h3>
<p>Operational data management workspace</p>

<h4>Data Management</h4>
<ul>
    <li><a href="#application-responses">üìù Application Responses <span class="badge">{{ application_responses|length }}</span></a></li>
    <li><a href="#orders">üìã Orders <span class="badge">Coming Soon</span></a></li>
    <li><a href="#applications">üì± Applications <span class="badge">Coming Soon</span></a></li>
</ul>

<h4>Order Management</h4>
<ul>
    <li><a href="#order-options">üìã Order Options <span class="badge">{{ order_options|length }}</span></a></li>
    <li><a href="#order-data-verts">üìä Order Data Verts <span class="badge">{{ order_data_verts|length }}</span></a></li>
    <li><a href="#document-details">üìÑ Document Details <span class="badge">{{ document_details|length }}</span></a></li>
</ul>

<h4>Company Management</h4>
<ul>
    <li><a href="#options">‚öôÔ∏è Options <span class="badge">{{ options|length }}</span></a></li>
    <li><a href="#companies">üè¢ Companies <span class="badge">{{ companies|length }}</span></a></li>
    <li><a href="#company-locations">üìç Company Locations <span class="badge">{{ company_locations|length }}</span></a></li>
    <li><a href="#company-contacts">üë• Company Contacts <span class="badge">{{ company_contacts|length }}</span></a></li>
    <li><a href="#company-aliases">üè∑Ô∏è Company Aliases <span class="badge">{{ company_aliases|length }}</span></a></li>
</ul>

<h4>Management Tools</h4>
<ul>
    <li><a href="{% url 'core:catalog' %}">üìä View Catalog</a></li>
    <li><a href="{% url 'core:machine_learning' %}">ü§ñ Machine Learning</a></li>
    <li><a href="#" onclick="alert('Reports coming soon')">üìà Reports</a></li>
    <li><a href="#" onclick="alert('Analytics coming soon')">üìä Analytics</a></li>
</ul>

<h4>Quick Actions</h4>
<ul>
    <li><a href="{% url 'core:application_response_list' %}">View All Responses</a></li>
    <li><a href="{% url 'core:options_list' %}">View All Options</a></li>
    <li><a href="{% url 'core:company_list' %}">View All Companies</a></li>
    <li><a href="{% url 'core:company_contact_list' %}">View All Contacts</a></li>
    <li><a href="{% url 'core:order_option_list' %}">View All Order Options</a></li>
    <li><a href="{% url 'core:order_data_vert_list' %}">View All Order Data Verts</a></li>
    <li><a href="{% url 'core:document_detail_list' %}">View All Document Details</a></li>
</ul>
{% endblock %}

{% block page_title %}Workstation Hub{% endblock %}
{% block page_subtitle %}Operational data management and workflow processing center{% endblock %}

{% block content %}
{{ block.super }}

<!-- Enhanced Stats Overview -->
<div class="stats">
    <div class="stat-card">
        <div class="stat-number">{{ application_responses|length }}</div>
        <div>Application Responses</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_companies }}</div>
        <div>Companies</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_contacts }}</div>
        <div>Company Contacts</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_locations }}</div>
        <div>Company Locations</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_options }}</div>
        <div>Options</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_aliases }}</div>
        <div>Company Aliases</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_order_options }}</div>
        <div>Order Options</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_order_data_verts }}</div>
        <div>Order Data Verts</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_document_details }}</div>
        <div>Document Details</div>
    </div>
</div>

<!-- Enhanced Search Bar -->
<div class="card">
    <h3>üîç Search Workstation Data</h3>
    <input type="text" id="globalSearch" placeholder="Search across all workstation data..." style="width: 400px; padding: 10px; margin-right: 10px; border: 1px solid #ddd; border-radius: 4px;">
    <button class="btn" onclick="performGlobalSearch()">Search</button>
    <button class="btn btn-secondary" onclick="clearSearch()">Clear</button>
</div>

<!-- Application Responses Section -->
<div id="application-responses" class="card">
    <h2>üìù Application Responses</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:application_response_list' %}" class="btn">View All Responses</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" data-model="application-response" data-id="add">
                Add New Response
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Response ID</th>
                    <th>Application</th>
                    <th>Question</th>
                    <th>Order</th>
                    <th>Response</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for response in application_responses %}
                <tr>
                    {% include "core/partials/application_response_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6">
                        <div style="text-align: center; padding: 20px;">
                            <p>No application responses found in the database.</p>
                            <button class="btn-edit-modal btn" data-model="application-response" data-id="add">
                                Add First Response
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ application_responses|length }} application responses
        {% if application_responses|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:application_response_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Options Section -->
<div id="options" class="card">
    <h2>‚öôÔ∏è Options</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:options_list' %}" class="btn">View All Options</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" 
                    data-model="options" 
                    data-id="add">
                Add New Option
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Option ID</th>
                    <th>Option Name</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for option in options %}
                <tr>
                    {% include "core/partials/options_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3">
                        <div style="text-align: center; padding: 20px;">
                            <p>No options found in the database.</p>
                            <button class="btn-edit-modal btn" 
                                    data-model="options" 
                                    data-id="add">
                                Add First Option
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_options }} options
        {% if options|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:options_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Companies Section -->
<div id="companies" class="card">
    <h2>üè¢ Companies</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:company_list' %}" class="btn">View All Companies</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" 
                    data-model="company" 
                    data-id="add">
                Add New Company
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Company ID</th>
                    <th>Company Name</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for company in companies %}
                <tr>
                    {% include "core/partials/company_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3">
                        <div style="text-align: center; padding: 20px;">
                            <p>No companies found in the database.</p>
                            <button class="btn-edit-modal btn" 
                                    data-model="company" 
                                    data-id="add">
                                Add First Company
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_companies }} companies
        {% if companies|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:company_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Company Locations Section -->
<div id="company-locations" class="card">
    <h2>üìç Company Locations</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:company_location_list' %}" class="btn">View All Locations</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" data-model="company-location" data-id="add">
                Add New Location
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Location ID</th>
                    <th>Company</th>
                    <th>City, State</th>
                    <th>Address</th>
                    <th>Mailing</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for location in company_locations %}
                <tr>
                    {% include "core/partials/company_location_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6">
                        <div style="text-align: center; padding: 20px;">
                            <p>No company locations found in the database.</p>
                            <button class="btn-edit-modal btn" data-model="company-location" data-id="add">
                                Add First Location
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_locations }} company locations
        {% if company_locations|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:company_location_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Company Contacts Section -->
<div id="company-contacts" class="card">
    <h2>üë• Company Contacts</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:company_contact_list' %}" class="btn">View All Contacts</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" 
                    data-model="company-contact" 
                    data-id="add">
                Add New Contact
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Contact ID</th>
                    <th>Company</th>
                    <th>Name</th>
                    <th>Title</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for contact in company_contacts %}
                <tr>
                    {% include "core/partials/company_contact_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7">
                        <div style="text-align: center; padding: 20px;">
                            <p>No company contacts found in the database.</p>
                            <button class="btn-edit-modal btn" 
                                    data-model="company-contact" 
                                    data-id="add">
                                Add First Contact
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_contacts }} company contacts
        {% if company_contacts|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:company_contact_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Company Aliases Section -->
<div id="company-aliases" class="card">
    <h2>üè∑Ô∏è Company Aliases</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:company_alias_list' %}" class="btn">View All Aliases</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" data-model="company-alias" data-id="add">
                Add New Alias
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Alias ID</th>
                    <th>Company</th>
                    <th>Alias Name</th>
                    <th>Effective Date</th>
                    <th>Expiration Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for alias in company_aliases %}
                <tr>
                    {% include "core/partials/company_alias_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6">
                        <div style="text-align: center; padding: 20px;">
                            <p>No company aliases found in the database.</p>
                            <button class="btn-edit-modal btn" data-model="company-alias" data-id="add">
                                Add First Alias
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_aliases }} company aliases
        {% if company_aliases|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:company_alias_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Order Options Section -->
<div id="order-options" class="card">
    <h2>üìã Order Options</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:order_option_list' %}" class="btn">View All Order Options</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" data-model="order-option" data-id="add">
                Add New Order Option
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Option ID</th>
                    <th>Order</th>
                    <th>Option</th>
                    <th>Cover</th>
                    <th>Premium</th>
                    <th>Bound</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for order_option in order_options %}
                <tr>
                    {% include "core/partials/order_option_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7">
                        <div style="text-align: center; padding: 20px;">
                            <p>No order options found in the database.</p>
                            <button class="btn-edit-modal btn" data-model="order-option" data-id="add">
                                Add First Order Option
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_order_options }} order options
        {% if order_options|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:order_option_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Replace the Order Data Verts Section in your workstation.html -->
<!-- Order Data Verts Section -->
<div id="order-data-verts" class="card">
    <h2>üìä Order Data Verts</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:order_data_vert_list' %}" class="btn">View All Order Data Verts</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" data-model="order-data-vert" data-id="add">
                Add New Order Data Vert
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Vert ID</th>
                    <th>Order</th>
                    <th>Parameter</th>
                    <th>Vert Value</th>
                    <th>Parameter Map</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for order_data_vert in order_data_verts %}
                <tr>
                    {% include "core/partials/order_data_vert_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6">
                        <div style="text-align: center; padding: 20px;">
                            <p>No order data verts found in the database.</p>
                            <button class="btn-edit-modal btn" data-model="order-data-vert" data-id="add">
                                Add First Order Data Vert
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_order_data_verts }} order data verts
        {% if order_data_verts|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:order_data_vert_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Order Data Verts Section -->
<div id="order-data-verts" class="card">
    <h2>üìä Order Data Verts</h2>
    <div style="margin-bottom: 15px;">
        <a href="{% url 'core:order_data_vert_list' %}" class="btn">View All Order Data Verts</a>
        <button class="btn" onclick="alert('Add order data vert functionality coming soon')">Add Order Data Vert</button>
        <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Vert ID</th>
                    <th>Order</th>
                    <th>Parameter</th>
                    <th>Vert Value</th>
                    <th>Parameter Map</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for order_data_vert in order_data_verts %}
                <tr>
                    <td>{{ order_data_vert.order_date_vert_id }}</td>
                    <td>
                        {% if order_data_vert.order %}
                            <a href="#" onclick="alert('Order details: {{ order_data_vert.order.orders_id }}')">
                                <span style="color: #7c3aed;">Order {{ order_data_vert.order.orders_id }}</span>
                            </a>
                        {% else %}
                            <span style="color: #999;">No Order</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if order_data_vert.parameter %}
                            <a href="{% url 'core:parameter_detail' order_data_vert.parameter.parameter_id %}">
                                {{ order_data_vert.parameter.parameter_name|default:"Unnamed Parameter"|truncatechars:20 }}
                            </a>
                        {% else %}
                            <span style="color: #999;">No Parameter</span>
                        {% endif %}
                    </td>
                    <td>
                        <span style="color: #374151;" title="{{ order_data_vert.vert_value }}">
                            {{ order_data_vert.vert_value|default:"No Value"|truncatechars:30 }}
                        </span>
                    </td>
                    <td>
                        {% if order_data_vert.parameter_map %}
                            <a href="{% url 'core:parameter_map_detail' order_data_vert.parameter_map.parameter_map_id %}">
                                Map {{ order_data_vert.parameter_map.parameter_map_id }}
                            </a>
                        {% else %}
                            <span style="color: #999;">No Map</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'core:order_data_vert_detail' order_data_vert.order_date_vert_id %}">View Details</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6">
                        <p>No order data verts found in the database.</p>
                        <button class="btn">Add Order Data Vert</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_order_data_verts }} order data verts
        {% if order_data_verts|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:order_data_vert_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Document Details Section -->
<div id="document-details" class="card">
    <h2>üìÑ Document Details</h2>
    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="{% url 'core:document_detail_list' %}" class="btn">View All Document Details</a>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-edit-modal btn" data-model="document-detail" data-id="add">
                Add New Document Detail
            </button>
            <button class="btn btn-secondary" onclick="alert('Export functionality coming soon')">Export</button>
        </div>
    </div>
    
    <div style="max-height: 500px; overflow-y: auto;">
        <table>
            <thead>
                <tr>
                    <th>Detail ID</th>
                    <th>Order Option</th>
                    <th>Document</th>
                    <th>Document Code</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for document_detail in document_details %}
                <tr>
                    {% include "core/partials/document_detail_row.html" %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">
                        <div style="text-align: center; padding: 20px;">
                            <p>No document details found in the database.</p>
                            <button class="btn-edit-modal btn" data-model="document-detail" data-id="add">
                                Add First Document Detail
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #666;">
        Total: {{ total_document_details }} document details
        {% if document_details|length >= 20 %}
            (showing first 20 - <a href="{% url 'core:document_detail_list' %}">view all</a>)
        {% endif %}
    </p>
</div>

<!-- Future Orders Section (Placeholder) -->
<div id="orders" class="card">
    <h2>üìã Orders</h2>
    <div style="margin-bottom: 15px;">
        <button class="btn btn-secondary" disabled>Coming Soon</button>
    </div>
    <p style="color: #666; text-align: center; padding: 40px;">
        Orders management section will be added next. This will show order data from your PostgreSQL database.
    </p>
</div>

<!-- Future Applications Section (Placeholder) -->
<div id="applications" class="card">
    <h2>üì± Applications</h2>
    <div style="margin-bottom: 15px;">
        <button class="btn btn-secondary" disabled>Coming Soon</button>
    </div>
    <p style="color: #666; text-align: center; padding: 40px;">
        Applications management section will be added next. This will show application data from your PostgreSQL database.
    </p>
</div>

<script>
// Enhanced search functionality (same as catalog)
function performGlobalSearch() {
    const query = document.getElementById('globalSearch').value.toLowerCase();
    if (!query) {
        alert('Please enter a search term');
        return;
    }
    
    const allRows = document.querySelectorAll('tbody tr');
    let hasResults = false;
    
    allRows.forEach(row => {
        const text = row.textContent.toLowerCase();
        if (text.includes(query)) {
            row.style.display = '';
            hasResults = true;
            // Highlight the section
            const section = row.closest('.card');
            if (section) {
                section.style.border = '2px solid #007bff';
                setTimeout(() => {
                    section.style.border = '1px solid #ddd';
                }, 3000);
            }
        } else {
            row.style.display = 'none';
        }
    });
    
    if (!hasResults) {
        alert('No results found for "' + query + '"');
        clearSearch();
    }
}

function clearSearch() {
    document.getElementById('globalSearch').value = '';
    const allRows = document.querySelectorAll('tbody tr');
    allRows.forEach(row => row.style.display = '');
    
    // Reset section borders
    document.querySelectorAll('.card').forEach(card => {
        card.style.border = '1px solid #ddd';
    });
}

// Enter key search
document.getElementById('globalSearch').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        performGlobalSearch();
    }
});

// Simple smooth scrolling for anchor links (same as catalog)
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({ behavior: 'smooth' });
            // Add a brief highlight effect
            target.style.background = '#f0f8ff';
            setTimeout(() => {
                target.style.background = '';
            }, 2000);
        }
    });
});

console.log('Workstation loaded with {{ application_responses|length }} application responses and {{ total_companies }} companies');
</script>
{% endblock %}